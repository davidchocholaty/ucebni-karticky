<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
    </style>
</head>
<body>

<h1>Výukové kartičky - vlastní zadání</h1> <!-- Nahradte názvem svého zadání -->

<dl>
	<dt>Autoři</dt>
	<dd>David Chocholatý <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xchoch09@stud.fit.vutbr.cz">xchoch09@stud.fit.vutbr.cz</a> -
		vedoucí týmu, Use Case Diagram, vytvoření databáze, vytvoření migrací, úvodní stránka, přihlášení, registrace,
        automatické odhlášení po určité době nečinnosti, vytvoření skupiny,
        vytvoření cvičení, editace skupiny, editace cvičení, zobrazení skupiny, správa uživatelů, správa skupin,
        správa cvičení, statistiky uživatele, ukládání obrázků
	</dd>
	<dd>Tomáš Bártů <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xbartu11@stud.fit.vutbr.cz">xbartu11@stud.fit.vutbr.cz</a> -
		webhosting, vytvoření databáze, naplnění databáze ukázkovými a testovacími daty, testy,
        vlastní chybové stránky, hlavní stránka uživatele, sdílení cvičení, moje cvičení (pro učitele i žáka),
        moje skupiny (pro učitele i žáka), veřejné cvičení, zobrazení cvičení, spuštění cvičení,
        ukládání pokusů cvičení
	</dd>
  <dd>Šimon Vacek <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xvacek10@stud.fit.vutbr.cz">xvacek10@stud.fit.vutbr.cz</a> -
		ER diagram, vytvoření databáze, hlavička stránky, menu stránky, zadávání cvičení, zrušení zadání cvičení, zobrazení uživatelského účtu,
        správa uživatelského účtu, statistiky skupiny, ukládání obrázků
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="https://ucebnikarticky.jednoduse.cz/">https://ucebnikarticky.jednoduse.cz/</a></dd>
</dl>

<h2>Uživatelé systému pro testování</h2>
<p>Uveďte prosím existující zástupce <strong>všech rolí uživatelů</strong>.</p>
<table>
<tbody><tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>admin@example.com</td><td>admin</td><td>Administrátor</td></tr>
<tr><td>BBELM@example.com</td><td>Osciloskop123</td><td>Učitel</td></tr>
<tr><td>speedy@example.com</td><td>BigShock</td><td>Student</td></tr>
<tr><td><i>bez loginu</i></td><td><i>bez hesla</i></td><td>Nepřihlášený uživatel</td></tr>
</tbody></table>

<h4>Diagram případů užití</h4>
<embed src="UseCaseDiagram.pdf" width="75%" height="800px" type="application/pdf"/>

<h3>Video</h3>
<a href="https://drive.google.com/drive/folders/1R2PhlfcX6UxnVg-ZIW6lDKTS3v_YA4Y-?usp=share_link">https://drive.google.com/drive/folders/1R2PhlfcX6UxnVg-ZIW6lDKTS3v_YA4Y-?usp=share_link</a>

<h2>Implementace</h2>
<p>
    Routes dostupné uživatelům jsou nadefinované v souboru <i>routes/web.php</i>. Téměř každá route je obsluhovaná některým controllerem
    z adresáře <i>app/Htpp/Controllers/</i>
</p>

<h3>app/Htpp/Controllers/</h3>
<ul>
    <li>Controller.php - vygenerovaná rodičovská třída, ze které dědí ostatní controllery</li>
    <li>HomeController.php - domovská stránka (důležitý jenom pro autorizaci uživatele)</li>
    <li>ImageUploadController.php - zajišťuje uložení nahraného obrázku na server</li>
    <li>ProfileController.php - zobrazení, úprava (uživatelem i administrátorem) a smazání uživatelského profilu</li>
    <li> Administration
        <ul>
            <li>ExerciseAdministrationController.php - získání, vyhledání všech cvičení a smazání</li>
            <li>GroupAdministrationController.php - získání, vyhledání všech skupin a smazání</li>
            <li>UserAdministrationController.php - získání, vyhledání všech uživatelů a smazání</li>
        </ul>
    </li>
    <li> Attempts
        <ul>
            <li>Attempts.php - uložení pokusu po absolvování cvičení</li>
        </ul>
    </li>
    <li> Auth - <i>vygenerován laravelem</i>
        <ul>
            <li>RegisterController.php - modifikovaný pro registrační formulář</li>
            <li>…</li>
        </ul>
    </li>
    <li> Exercise
        <ul>
            <li>CreateExerciseController.php - vytvoření cvičení</li>
            <li>EditExerciseController.php - úprava cvičení</li>
            <li>ExerciseController.php - získání cvičení, členů skupiny, zadání skupině žáků a sdílení skupině učitelů</li>
            <li>PublicExerciseController.php - získání veřejných cvičení</li>
        </ul>
    </li>
    <li> Flashcards
        <ul>
            <li>FlashcardController.php - získání kartiček ve cvičení, autorizace</li>
            <li>FlashcardPracticeController.php - zobrazení kartiček po jedné</li>
            <li>PublicFlashcardController.php - získání kartiček ve veřejném cvičení</li>
            <li>PublicFlashcardPracticeExerciseController.php - zobrazení kartiček po jedné</li>
        </ul>
    </li>
    <li> Groups
        <ul>
            <li>CreateGroupController.php - vytvoření a uložení skupiny</li>
            <li>EditGroupController.php - úprava skupiny, přidání a odebrání uživatele</li>
            <li>GroupController.php - získání dat pro výpis všech skupin</li>
            <li>ShowGroupController.php - získání dat pro detail skupiny</li>
        </ul>
    </li>
    <li> Statistics
        <ul>
            <li>GroupStatisticsController.php - získání dat pro zobrazení statistik skupiny</li>
            <li>UserStatisticsController.php - získání dat pro zobrazení statistik žáka</li>
        </ul>
    </li>
</ul>

<p>
    Tyto controllery provádí autorizaci a operace s daty, které posílají view, který se zobrazí uživateli.
    Views jsou uložené v <i>resources/views/</i>
</p>

<h3>resources/views/</h3>
<ul>
    <li>home.blade.php - domovská stránka přihlášeného uživatele</li>
    <li>welcome.blade.php - obal pro výchozí stránku aplikace</li>
    <li>administration
        <ul>
            <li>exercise-administration.php - správa cvičení</li>
            <li>group-administration.php - správa skupin</li>
            <li>user-administration.php - správa uživatelů</li>
        </ul>
    </li>
    <li>auth - <i>vygenerován laravelem</i>
        <ul>
            <li>…</li>
        </ul>
    </li>
    <li>errors
        <ul>
            <li>400.blade.php - stránka pro HTTP status kód 400</li>
            <li>401.blade.php - stránka pro HTTP status kód 401</li>
            <li>402.blade.php - stránka pro HTTP status kód 402</li>
            <li>403.blade.php - stránka pro HTTP status kód 403</li>
            <li>404.blade.php - stránka pro HTTP status kód 404</li>
            <li>500.blade.php - stránka pro HTTP status kód 500</li>
        </ul>
    </li>
    <li>exercises
        <ul>
            <li>create-exercise.blade.php - vytvoření cvičení</li>
            <li>edit-exercise.blade.php - úprava cvičení</li>
            <li>myexercises.blade.php - přehled uživatelem dostupných cvičení</li>
            <li>public-exercise.blade.php - přehled veřejně dostupných cvičení</li>
        </ul>
    </li>
    <li>flashcards
        <ul>
            <li>flashcard.blade.php - </li>
            <li>flashcard-invalid.blade.php</li>
            <li>flashcardPractice.blade.php</li>
            <li>public-flashcard.blade.php</li>
            <li>public-flashcard-invalid.blade.php</li>
            <li>public-flashcardPractice.blade.php</li>
        </ul>
    </li>
    <li>groups
        <ul>
            <li>create-group.blade.php - vytvoření skupiny</li>
            <li>edit-group.blade.php - úprava skupiny</li>
            <li>mygroups.blade.php - přehled skupin, kterých je uživatel členem</li>
            <li>show-group.blade.php - přehled veřejých skupin</li>
        </ul>
    </li>
    <li>layout
        <ul>
            <li>app.blade.php - vnitřek výchozí stránky aplikace (vkládá se do <i>welcome.blade.php</i>)</li>
            <li>errorMain.blade.php - obal pro jednotlivé chybové stránky</li>
            <li>header.blade.php - vrchní pás každé stránky</li>
            <li>main.blade.php - obal pro obsah stránek</li>
            <li>sidenav.blade.php - levé menu každé stránky</li>
        </ul>
    </li>
    <li>profile
        <ul>
            <li>edit.blade.php - stránka s úpravou uživatelského profilu</li>
            <li>show.blade.php - stránka s detailem uživatelského profilu</li>
        </ul>
    </li>
    <li>statistics
        <ul>
            <li>group-statistics.blade.php - statistiky skupiny na daném cvičení</li>
            <li>user-statistics.blade.php - statistiky uživatele na daném cvičení</li>
        </ul>
    </li>
</ul>


<p>Modely představující jednotlivé entitní množiny, které jsou zachycené v E-R diagramu jsou k nalezení v adresáři <i>app/Models/</i></p>
<ul>
    <li>Attempt</li>
    <li>Exercise</li>
    <li>Flashcard</li>
    <li>Group</li>
    <li>User</li>
</ul>

<h3>Databáze</h3>

<embed src="ErDiagram.pdf" width="75%" height="700px" type="application/pdf"/>

<h3>Přihlášení a registrace</h3>

<p>
    Přihlášení a registrace je obstarána vestavěnými metodami a controllery z adresáře <i>app/Http/Controllers/Auth</i>.
</p>
<p>
    Ty se zároveň starají o autentizaci uživatele na jednotlivých stránkách pomocí konstruktoru jednotlivých controllerů,
    který obsahuje výraz <i>$this->middleware('auth');</i>
</p>

<h2>Instalace</h2>

<p>Celý projekt si lze stáhnout z následujícího odkazu:</p>
<a href="https://github.com/davidchocholaty/ucebni-karticky/tree/06fe353afac66fbb8d071dd7ce869819b48493d0">https://github.com/davidchocholaty/ucebni-karticky/tree/06fe353afac66fbb8d071dd7ce869819b48493d0</a>

<h4>Požadavky</h4>

Pro spuštění projektu je zapotřebí splnit následující požadavky:
<ul>
    <li>
        PHP: ^7.3
    </li>
    <li>
        Laravel: ^8.75 (pozn.: bude nainstalováno automaticky při následující instalaci projektu, viz dále)
    </li>
    <li>
        Composer: otestováno na 2.4.2 - 2.4.4
    </li>
    <li>
        Databáze: MySQL (InnoDB)
    </li>
    <li>
        Požadavky na verze knihoven (viz soubor <i>composer.json</i>):
        <p>- pozn.: bude nainstalováno automaticky při následující instalaci projektu, viz dále</p>
        <ul>
            <li>
                Požadovány:
                <ul>
                    <li>
                        fruitcake/laravel-cors: ^2.0
                    </li>
                    <li>
                        guzzlehttp/guzzle: ^7.0.1
                    </li>
                    <li>
                        laravel/framework: ^8.75
                    </li>
                    <li>
                        laravel/sanctum: ^2.11
                    </li>
                    <li>
                        laravel/tinker: ^2.5
                    </li>
                    <li>
                        laravel/ui: ^3.4
                    </li>
                    <li>
                        ext-json: *
                    </li>
                </ul>
            </li>
            <li>
                Požadovány pro vývoj:

                <ul>
                    <li>
                        facade/ignition: ^2.5
                    </li>
                    <li>
                        fakerphp/faker: ^1.9.1
                    </li>
                    <li>
                        laravel/sail: ^1.0.1
                    </li>
                    <li>
                        mockery/mockery: ^1.4.4
                    </li>
                    <li>
                        nunomaduro/collision: ^5.10
                    </li>
                    <li>
                        phpunit/phpunit: ^9.5.10
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul>

<p>Pro instalaci <i>PHP</i> například verze 7.4 na Ubuntu 20.04 lze doporučit postup dle následujícího odkazu:</p>
<a href="https://www.digitalocean.com/community/tutorials/how-to-install-php-7-4-and-set-up-a-local-development-environment-on-ubuntu-20-04">https://www.digitalocean.com/community/tutorials/how-to-install-php-7-4-and-set-up-a-local-development-environment-on-ubuntu-20-04</a>

<p>Pro instalaci <i>Composer</i> na Ubuntu 20.04 lze doporučit postup dle následujícího odkazu:</p>
<a href="https://www.digitalocean.com/community/tutorials/how-to-install-composer-on-ubuntu-20-04-quickstart">https://www.digitalocean.com/community/tutorials/how-to-install-composer-on-ubuntu-20-04-quickstart</a>

<h4>Postup instalace a spuštění</h4>
<p><u>Po nainstalování všech požadovaných utilit (<i>PHP</i> a <i>Composer</i>) postupujte dle následujících instrukcí:</u></p>

<ol>
    <li>
        <p>Nejprve je nutné si stáhnou celý projekt z výše uvedeného odkazu (<i>github</i>). Po stažení a případném rozbalení archivu se přesuňte do kořenové složky projektu příkazem:

        <p><i>cd ucebni-karticky/</i></p>

        <p>Všechny další úkony provádějte výhradně ve zmíněné umístnění. Poté pro instalaci zadejte následující 2 příkazy:</p>

        <p><i>composer update</i></p>
        <p><i>composer install</i></p>
    </li>
    <li>
        <p> Dále je nutné vytvořit soubor <i>.env</i> a jeho obsah vyplnit obsahem souboru <i>.env.example</i>. Zmíněný postup lze provést následujícím příkazem:</p>

        <p><i>cp .env.example .env</i></p>
    </li>
    <li>
        <p>Poté je třeba vytvořit vlastní MySQL databázi. Po jejím vytvoření je nutné její název, uživatele a jeho heslo zadat do souboru <i>.env</i> za následující parametry ve stejném pořadí:</p>
        <ul>
            <li>
                DB_DATABASE=<i>jméno databáze</i>
            </li>
            <li>
                DB_USERNAME=<i>jméno uživatele</i>
            </li>
            <li>
                DB_PASSWORD=<i>heslo uživatele</i>
            </li>
        </ul>
    </li>
    <li>
        <p>Jako další krok zadejte uvedený příkaz pro vygenerování klíče:</p>

        <p><i>php artisan key:generate</i></p>
    </li>
    <li>
        <p>Jako předposlední krok bude vytvořena struktura databáze a naplněna testovacími daty.
        Pro vygenerování uvedených uživatelů systému společně s náhodně vygenerovanými
        uživateli zadejte následují příkaz:</p>

        <p><i>php artisan migrate:fresh --seed</i></p>

        <p><i>Pozn.: pro vytvoření databáze bez naplnění testovacími daty zadejte příkaz:</i></p>

        <p><i> php artisan migrate:fresh.</i></p>

        <p>Poté je možná naplnit vytvořenou strukturu tabulek pomocí přiloženého SQL skriptu <i>input.sql</i>. Případně je možné totožný skript najít ve složce <i>/docs</i> ve staženém projektu.</p>
    </li>
    <li>
        <p>Po splnění všech požadavků je pak možné projekt spustit následujícím příkazem při umístění v kořenové složce projektu:</p>

        <p><i>php artisan serve</i></p>

        Po zadání uvedeného příkazu pak lze na webovou stránku přistoupit na adrese uvedené ve výstupu terminálu:
        </p>

        <p>například: <i>127.0.0.1:8000</i></p>

        Pro testování aplikace je opět možné využít výše zmíněné uživatele systému pro testování tak, jako je tomu v případě veřejné verze na <a href="https://ucebnikarticky.jednoduse.cz/">https://ucebnikarticky.jednoduse.cz/</a>.
    </li>

    <hr />

    Pozn.: pro spuštění poskutnutých testů zadejte následující příkaz:

    <p><i>php artisan test</i></p>
</ol>


<h2>Známé problémy</h2>
<p>Z důvodu velkého nadsazení navržených částí projektu v původním vlastním zadání
    a s ohledem na časové možnosti nebyly v systému implementovány následující 2 části:</p>
<ul>
    <li>
        Každé cvičení se kategorizuje do témat dle štítků
        podle obzažené látky (Anglický jazyk, Přirodopis, ...).
    </li>
    <li>
        Systém rozlišuje mezi splněnými a nedokončenými cvičeními.
    </li>
</ul>

</body></html>
